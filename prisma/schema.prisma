// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider      = "prisma-client-js"
  // Azure Static Web Apps runners provide OpenSSL so we only ship the dynamic
  // binaries to avoid 404 errors when downloading the deprecated static target.
  binaryTargets = ["native", "darwin", "darwin-arm64", "debian-openssl-1.1.x", "debian-openssl-3.0.x"]
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

enum Role {
  ATLETA
  AGENTE
  CLUBE
  TORCEDOR
  IMPRENSA
  RESPONSAVEL
}

model Account {
  id                String  @id @default(cuid())
  userId            String
  type              String
  provider          String
  providerAccountId String
  refresh_token     String? @db.Text
  access_token      String? @db.Text
  expires_at        Int?
  token_type        String?
  scope             String?
  id_token          String? @db.Text
  session_state     String?

  user User @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@unique([provider, providerAccountId])
}

model Session {
  id           String   @id @default(cuid())
  sessionToken String   @unique
  userId       String
  expires      DateTime
  user         User     @relation(fields: [userId], references: [id], onDelete: Cascade)
}

model User {
  id            String    @id @default(cuid())
  name          String?
  email         String?   @unique
  passwordHash  String
  emailVerified DateTime?
  image         String?
  accounts      Account[]
  sessions      Session[]
  videos        Video[]
  news          News[]
  profile       Profile?
  createdAt     DateTime  @default(now())
  updatedAt     DateTime  @updatedAt
}

model VerificationToken {
  identifier String
  token      String   @unique
  expires    DateTime

  @@unique([identifier, token])
}

model Profile {
  id                    String   @id @default(cuid())
  displayName           String?
  avatarUrl             String?
  bio                   String?
  role                  Role
  data                  Json?
  cpf                   String?
  rg                    String?
  cep                   String?
  nascimento            String?
  genero                String?
  telefone              String?
  ddd                   String?
  site                  String?
  endereco              String?
  redesSociais          String?
  areaAtuacao           String?
  portfolio             String?
  posicao               String?
  perna                 String?
  altura                String?
  peso                  String?
  pais                  String?
  uf                    String?
  clube                 String?
  nomeFantasia          String?
  emailClube            String?
  cidade                String?
  cnpj                  String?
  inscricaoEstadual     String?
  representanteNome     String?
  representanteCpf      String?
  representanteEmail    String?
  whatsapp              String?
  registroCbf           String?
  registroFifa          String?
  responsavelNascimento String?
  responsavelGenero     String?
  responsavelInstagram  String?
  atletaNome            String?
  atletaCpf             String?
  atletaNascimento      String?
  atletaGenero          String?
  atletaEsporte         String?
  atletaModalidade      String?
  atletaObservacoes     String?
  notifNovidades        Boolean? @default(false)
  notifJogos            Boolean? @default(false)
  notifEventos          Boolean? @default(false)
  notifAtletas          Boolean? @default(false)
  termos                Boolean? @default(false)
  lgpdWhatsappNoticias  Boolean? @default(false)
  lgpdWhatsappConvites  Boolean? @default(false)
  user                  User     @relation(fields: [userId], references: [id])
  userId                String   @unique
  createdAt             DateTime @default(now())
  updatedAt             DateTime @updatedAt
}

model Video {
  id           String   @id @default(cuid())
  title        String
  description  String?
  videoUrl     String
  thumbnailUrl String?
  createdAt    DateTime @default(now())
  updatedAt    DateTime @updatedAt
  user         User     @relation(fields: [userId], references: [id])
  userId       String
}

model Confederation {
  id    String @id @default(cuid())
  name  String
  slug  String @unique
  clubs Club[]
}

model Club {
  id              String         @id @default(cuid())
  name            String         @unique
  slug            String         @unique
  confederation   Confederation? @relation(fields: [confederationId], references: [id])
  confederationId String?
  homeGames       Game[]         @relation("HomeClub")
  awayGames       Game[]         @relation("AwayClub")
}

model News {
  id          String   @id @default(cuid())
  title       String
  slug        String   @unique
  excerpt     String?  @db.Text
  content     String?  @db.Text
  category    String?
  coverImage  String?
  publishedAt DateTime @default(now())
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
  author      User?    @relation(fields: [authorId], references: [id])
  authorId    String?
}

model Game {
  id         String   @id @default(cuid())
  slug       String   @unique
  title      String
  category   String?
  excerpt    String?  @db.Text
  content    String?  @db.Text
  coverImage String?
  author     User?    @relation(fields: [authorId], references: [id])
  authorId   String?
  date       DateTime
  homeClub   Club     @relation("HomeClub", fields: [homeClubId], references: [id])
  homeClubId String
  awayClub   Club     @relation("AwayClub", fields: [awayClubId], references: [id])
  awayClubId String
  scoreHome  Int?
  scoreAway  Int?
  createdAt  DateTime @default(now())
  updatedAt  DateTime @updatedAt
}

model Times {
  id         String @id @default(cuid())
  divisao    String
  clube      String
  slug       String @unique
  sigla      String
  apelido    String
  mascote    String
  fundacao   Int?
  maiorIdolo String
  cidade     String
  estado     String
}
